{% extends 'base.html' %}
<!--
    Plantilla: `tratamientos_list.html` (lista de tratamientos).
    Notas educativas:
    - Espera `tratamientos` en el contexto (QuerySet). Se usa `{% for t in tratamientos %}`
        para renderizar filas de la tabla.
    - Los botones de eliminar usan formularios POST con `{% csrf_token %}`.
    - Revisar la vista que provee `tratamientos` para entender paginación/orden.
-->
{% block title %}Tratamientos{% endblock %}

{% block content %}
<header class="admin-page-header">
    <div>
        <small>Catálogo clínico</small>
        <h1 class="mb-0">Tratamientos</h1>
    </div>
    <a href="{% url 'tratamientos_crear' %}" class="btn btn-primary">Nuevo tratamiento</a>
</header>

<div class="card admin-table">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table align-middle">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Precio</th>
                        <th class="text-end">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for t in tratamientos %}
                    <tr>
                        <td class="fw-semibold">{{ t.nombre|upper }}</td>
                        <td class="text-muted">{{ t.descripcion|default:"Sin descripción" }}</td>
                        <td>${{ t.precio }}</td>
                        <td class="text-end table-actions">
                            <a href="{% url 'tratamientos_editar' t.id %}" class="btn btn-sm btn-outline-primary">Editar</a>
                            <form method="post" action="{% url 'tratamientos_eliminar' t.id %}" class="d-inline-block" onsubmit="return confirm('¿Eliminar tratamiento?');">
                                {% csrf_token %}
                                <button class="btn btn-sm btn-outline-danger" type="submit">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center text-muted py-4">No hay tratamientos registrados.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
