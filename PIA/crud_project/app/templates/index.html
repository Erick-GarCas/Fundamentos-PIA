<!DOCTYPE html>
{% load static %}
{% comment %} Landing pública (index). Contiene secciones estáticas y dinámicas
    que se rellenan vía JavaScript (tratamientos, galería, testimonios).
    Variables usadas desde el backend: `messages`.
{% endcomment %}
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Clínica Dental - Inicio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pY1z8e8y2QK1r3Q7QwQm8yQ4j0lJxHq2h0sL1K8q8Vb7zA9u0JvV5e6Q==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <!-- Google Fonts: Montserrat for headings, Poppins for body text -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <!-- Header minimalista, centrado y limpio
         - Usa el logo local en assets/img/logo.png
         - Navegación centrada, sin elementos visuales pesados
         - Mantener formato de código consistente con el resto del CSS/HTML -->
    <header class="site-header">
        <div class="container">
            <!-- Estructura del header: logo a la izquierda, nav centrado (absoluto) y acciones a la derecha -->
            <div class="header-inner d-flex align-items-center" role="navigation">
                <!-- Logo izquierda -->
                <a href="#" class="site-brand d-inline-block me-3" aria-label="Clínica Dental Vitaldent">
                    <img src="{% static 'img/logo.png' %}" alt="Clínica Dental Vitaldent" class="site-logo">
                </a>

                <!-- Navegación centrada (se posiciona en el centro del header) -->
                <nav class="site-nav" aria-label="Menú principal">
                    <ul class="list-unstyled d-flex justify-content-center gap-3 mb-0">
                        <li><a href="#" class="active">Inicio</a></li>
                        <li><a href="#nosotros">Nosotros</a></li>
                        <li><a href="#tratamientos">Tratamientos</a></li>
                        <li><a href="#cotizacion">Cotización</a></li>
                        <li><a href="#testimonios">Testimonios</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </nav>

                <!-- Acciones derecha -->
                <div class="site-actions d-flex ms-auto align-items-center">
                    <button id="btn-darkmode" class="toggle-btn" title="Modo oscuro" aria-pressed="false">
                        <i class="bi bi-moon-fill" aria-hidden="true"></i>
                    </button>
                    <a id="btn-login" href="{% url 'login' %}" class="login-btn ms-2" aria-label="Iniciar sesión">
                        <i class="bi bi-person-fill" aria-hidden="true"></i>
                        <span class="login-text">Iniciar sesión</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Banner principal: ahora usa imagen de fondo (equipo2.png) con overlay oscuro
         - La imagen cubre todo el ancho y se aplica un filtro oscuro para mejorar contraste
         - El texto y el botón se colocan sobre el overlay -->
    <div class="container">
        <div class="hero card p-4 text-white mt-4 has-img" style="background:none; border:none;">
            <!-- Fallback usando un <img> dentro del hero (opción A). -->
            <img src="{% static 'img/instalaciones3.png' %}" alt="Instalaciones" class="hero-bg" />

            <div class="hero-text">
                <h1 class="display-5">¡Tu salud bucal en manos expertas!</h1>
                <p class="lead">Atención integral y personalizada para toda la familia.</p>
                <a href="#contacto" class="btn hero-cta">Agendar cita</a>
            </div>
        </div>
    </div>

    <!-- Main: contenido principal de la landing -->
    <main class="container my-5">
        {% if messages %}
            <div class="mb-3">
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
        <!-- Sección: Nosotros -->
        <!-- Contenido semántico sobre la clínica: descripción, misión, visión y valores.
             Se usa para dar contexto al visitante y mejorar SEO/accessibilidad. -->
        <section id="nosotros" class="mb-5">
            <h2>Nosotros</h2>
            <div class="row align-items-center mt-3">
                <div class="col-md-6">
                    <p>Clínica Sonrisa es un centro dental dedicado a brindar atención integral con tecnología moderna y un equipo humano comprometido. Nuestra prioridad es tu salud y confianza.</p>
                    <h5>Misión</h5>
                    <p>Ofrecer tratamientos odontológicos de calidad que mejoren la salud y la calidad de vida de nuestros pacientes.</p>
                    <h5>Visión</h5>
                    <p>Ser un referente regional en odontología con enfoque en prevención, estética y atención personalizada.</p>
                </div>
                <div class="col-md-6 text-center">
                    <!-- Usamos la imagen local equipo2.png -->
                    <img src="{% static 'img/equipo2.png' %}" alt="Equipo dental" class="img-fluid rounded shadow img-nosotros" />
                </div>
            </div>
            <div class="row mt-4 feature-grid">
                <div class="col-md-4">
                    <div class="card p-3 feature-card">
                        <h6 class="card-title"><i class="bi bi-shield-check"></i> Valores</h6>
                            <ul>
                                <li>Higiene y esterilización estricta</li>
                                <li>Atención centrada en el paciente</li>
                                <li>Transparencia en tratamientos y precios</li>
                            </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3 feature-card">
                        <h6 class="card-title"><i class="bi bi-journal-medical"></i> Especialidades</h6>
                        <p>Odontología general, ortodoncia, higiene, estética dental y urgencias.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3 feature-card">
                        <h6 class="card-title"><i class="bi bi-people-fill"></i> Atención</h6>
                        <p>Atención personalizada con planes de tratamiento adaptados a cada paciente.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección: Tratamientos (conectada a datos) -->
        <!-- Renderiza las tarjetas de tratamientos y ofrece botones para cotizar o agendar -->
        <section id="tratamientos" class="mb-5">
            <div class="d-flex flex-wrap align-items-end justify-content-between gap-3">
                <div>
                    <h2>Tratamientos</h2>
                    <p class="text-muted mb-0">Elige entre nuestros tratamientos profesionales.</p>
                </div>
                <div class="treatments-counter text-muted small" id="tratamientos-count"></div>
            </div>
            <div class="treatments-slider mt-3">
                <button class="slider-btn slider-prev" id="tratamientos-prev" type="button" aria-label="Ver anteriores">&lsaquo;</button>
                <div class="slider-window">
                    <div id="tratamientos-list" class="slider-track"></div>
                </div>
                <button class="slider-btn slider-next" id="tratamientos-next" type="button" aria-label="Ver siguientes">&rsaquo;</button>
            </div>
            <div class="slider-dots" id="tratamientos-dots"></div>
        </section>

        <!-- Sección: Cotización interactiva (dropdown) -->
        <!-- Formulario dinámico que permite seleccionar un tratamiento desde un <select>,
             indicar cantidad/duración y aplicar descuento. El cálculo se realiza en JS. -->
        <section id="cotizacion" class="mb-5">
            <h2 class="section-title"><i class="bi bi-calculator"></i> Cotizador de Tratamientos</h2>
        <div class="cotizacion-row mt-3">
                <div class="cotizacion-left">
                    <form id="form-cotizacion" class="card p-3">
                        <div class="mb-3">
                            <label for="tratamiento-select" class="form-label">Selecciona un tratamiento</label>
                            <select id="tratamiento-select" class="form-select">
                                <!-- Opciones creadas por JS desde la lista de tratamientos -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="cantidad" class="form-label">Cantidad / Duración</label>
                            <input type="number" id="cantidad" class="form-control" min="1" value="1" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Aplicar descuento</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="descuento" id="desc0" value="0" checked>
                                    <label class="form-check-label" for="desc0">0%</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="descuento" id="desc10" value="10">
                                    <label class="form-check-label" for="desc10">10%</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="descuento" id="desc20" value="20">
                                    <label class="form-check-label" for="desc20">20%</label>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary" type="submit">Calcular total</button>
                    </form>
                </div>
                <div class="cotizacion-right">
                    <div id="resultado-cotizacion" class="card p-3">
                        <h5>Resultado</h5>
                        <div id="cotizacion-output">El costo total de tu tratamiento aparecerá aquí.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección: Galería -->
        <!-- Muestra imágenes del consultorio y antes/después con animación ligera al hover -->
        <section id="galeria" class="mb-5">
            <h2 class="section-title"><i class="bi bi-images"></i> Galería</h2>
            <!-- Carousel Bootstrap: items e indicadores creados por JS -->
            <div id="galleryCarousel" class="carousel slide mt-3" data-bs-ride="carousel">
                <div class="carousel-indicators" id="galeria-indicators"></div>
                <div class="carousel-inner" id="galeria-grid">
                    <!-- Items generados por JS -->
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Siguiente</span>
                </button>
            </div>
        </section>

        <!-- Sección: Testimonios -->
        <!-- Carrusel con opiniones de pacientes (3-4) -->
        <section id="testimonios" class="mb-5">
            <h2>Testimonios</h2>
            <div id="testimonialsCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner" id="testimonios-list">
                    <!-- Items generados por JS -->
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#testimonialsCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Anterior</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#testimonialsCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Siguiente</span>
                </button>
            </div>
        </section>

        <!-- FAQ -->
        <!-- Sección: FAQ (Preguntas Frecuentes) -->
        <!-- Utiliza el componente Accordion de Bootstrap para mostrar/ocultar respuestas -->
        <section id="faq" class="mb-5">
            <h2>Preguntas Frecuentes</h2>
            <div class="accordion mt-3" id="faqAcc">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq1">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">¿La clínica acepta emergencias?</button>
                    </h2>
                    <div id="collapse1" class="accordion-collapse collapse show" aria-labelledby="faq1" data-bs-parent="#faqAcc">
                        <div class="accordion-body">Sí, contamos con atención de urgencias en horarios de clínica. Comunícate por teléfono para priorizar tu cita.</div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq2">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">¿Ofrecen planes de pago?</button>
                    </h2>
                    <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#faqAcc">
                        <div class="accordion-body">Sí, tenemos opciones de financiamiento y planes de pago dependiendo del tratamiento.</div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="faq3">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">¿Cómo agendo una cita?</button>
                    </h2>
                    <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#faqAcc">
                        <div class="accordion-body">Puedes agendar por teléfono, WhatsApp o completando el formulario de contacto en esta página.</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer id="contacto" class="site-footer bg-light pt-5">
        <div class="container">
            <div class="row g-4 align-items-start footer-contact">
                <div class="col-md-6">
                    <!-- Formulario de solicitud de cita (vinculado a CitaDental)
                         - Nombre, Teléfono
                         - Selección de hasta 2 tratamientos (checkboxes generados por JS)
                         - Fecha y hora (datetime-local)
                         - Validación para que no haya 2 citas a la misma hora (client-side via localStorage)
                    -->
                    <form id="appointment-form" class="card p-3" method="post" action="{% url 'solicitar_cita' %}">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" id="nombre" name="nombre" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label for="telefono" class="form-label">Teléfono</label>
                            <input type="tel" id="telefono" name="telefono" class="form-control" pattern="[0-9]{7,15}" required>
                        </div>

                        <div class="mb-3">
                            <label for="correo" class="form-label">Correo electrónico (opcional)</label>
                            <input type="email" id="correo" name="correo" class="form-control" placeholder="nombre@correo.com">
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Selecciona hasta 2 tratamientos</label>
                            <div id="tratamientos-checkboxes" class="checkbox-grid">
                                <!-- Checkboxes generados por JS usando la lista de tratamientos -->
                            </div>
                            <div class="form-text">Puedes elegir hasta 2 tratamientos por solicitud.</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Fecha y hora solicitada</label>
                            <div class="row g-2">
                                <div class="col-md-6">
                                    <input type="date" id="fecha-dia" class="form-control" required>
                                </div>
                                <div class="col-md-6">
                                    <input type="time" id="hora-cita" class="form-control" required>
                                </div>
                            </div>
                            <input type="hidden" id="fecha-cita" name="fecha-cita">
                            <div class="form-text">No se permiten dos citas a la misma hora. El sistema validará disponibilidad.</div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">Solicitar cita</button>
                        <div id="contact-alert" class="mt-3" role="alert" style="display:none;"></div>
                    </form>
                </div>
            </div>
            <div class="footer-bottom text-center pt-4 mt-4 border-top">
                <p class="mb-0">© 2025 Clínica Dental Vitaldent — Todos los derechos reservados</p>
                <p class="mb-0">Dirección: Calle Ejemplo 123 · Horario: Lun-Vie 9:00 - 18:00</p>
                <div class="mt-2">
                    <a href="#" class="me-2"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" class="me-2"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="me-2"><i class="fa-brands fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts: primero el bundle de Bootstrap (componentes JS) y luego el script de la app
         main.js contiene la lógica para renderizar servicios, cotizador y validaciones. -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="{% static 'js/main.js' %}"></script>
</body>
</html>
